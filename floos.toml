# ============================================================================
# Floo Tunnel Server Configuration
# ============================================================================
# ⚠️  SECURITY WARNING: This config uses placeholder secrets for testing/benchmarks.
# ⚠️  Replace PSK and tokens before production deployment!
# ============================================================================

[server]
# Network settings
port = 8000
host = "0.0.0.0"  # Listen on all interfaces

# Encryption settings
cipher = "aegis128l"  # Options: aegis128l (fastest), aegis256, aes128gcm, aes256gcm, chacha20poly1305, none
                      # Recommended: aegis128l for best performance (29.4 Gbps on M1)
psk = "benchmark-test-key"  # ⚠️ CHANGE THIS BEFORE PRODUCTION
default_token = "floo-bench-token"  # ⚠️ CHANGE THIS BEFORE PRODUCTION

# Liveness & monitoring
heartbeat_interval_seconds = 30  # Send heartbeat to clients every 30s (0 = disabled)

# Performance tuning
socket_buffer_size = 4194304  # 4 MiB (increase to 8+ MiB for 10/40 Gbps links)
tcp_nodelay = true  # Disable Nagle algorithm for lower latency
tcp_keepalive = true  # Enable TCP keepalive
tcp_keepalive_idle = 60  # Seconds before first keepalive probe
tcp_keepalive_interval = 10  # Seconds between keepalive probes
tcp_keepalive_count = 3  # Number of failed probes before closing

# ============================================================================
# Services - Define forwarding targets
# ============================================================================

[server.services.primary]
id = 1  # Unique service ID (1-65535)
transport = "tcp"  # tcp or udp
target_host = "127.0.0.1"  # Where to forward traffic
target_port = 9000
token = "floo-bench-token"  # ⚠️ Per-service token (overrides default_token)

# Additional service example (commented out):
# [server.services.dns]
# id = 2
# transport = "udp"
# target_host = "10.0.0.53"
# target_port = 53
# token = "dns-secret-token"
# udp_timeout_seconds = 30  # UDP session timeout (optional override)
