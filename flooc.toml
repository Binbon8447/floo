# ============================================================================
# Floo Tunnel Client Configuration
# ============================================================================
# ⚠️  SECURITY WARNING: This config uses placeholder secrets for testing/benchmarks.
# ⚠️  Replace PSK and tokens before production deployment!
# ============================================================================

[client]
# Local listener
local_port = 9001  # Port where local apps connect

# Remote tunnel server
remote_host = "127.0.0.1"  # Tunnel server address
remote_port = 8000  # Tunnel server port

# Target service (forwarded through tunnel)
target_host = "127.0.0.1"  # Final destination
target_port = 9000  # Final destination port

# Tunnel multiplexing
num_tunnels = 4  # Parallel connections for load balancing (1-16 recommended)

# Encryption settings (must match server)
cipher = "aegis128l"  # Options: aegis128l (fastest), aegis256, aes128gcm, aes256gcm, chacha20poly1305, none
                      # Recommended: aegis128l for best performance (29.4 Gbps on M1)
                      # MUST MATCH SERVER CIPHER!
psk = "benchmark-test-key"  # ⚠️ CHANGE THIS - must match server PSK
service_id = 1  # Service ID to connect to on server
default_token = "floo-bench-token"  # ⚠️ CHANGE THIS - must match server token

# Liveness & reconnection
heartbeat_timeout_seconds = 40  # Consider connection dead after 40s without heartbeat
reconnect_enabled = true  # Auto-reconnect on failure
reconnect_initial_delay_ms = 1000  # Initial retry delay (1 second)
reconnect_max_delay_ms = 30000  # Max retry delay (30 seconds)
reconnect_backoff_multiplier = 2  # Exponential backoff multiplier

# Proxy settings (optional - uncomment to use)
# proxy_url = "socks5://127.0.0.1:1080"  # SOCKS5 or HTTP CONNECT proxy
# Examples:
#   socks5://127.0.0.1:1080
#   socks5://user:pass@proxy.corp.com:1080
#   http://proxy.example.com:8080
#   http://user:pass@proxy.corp.com:8080

# Performance tuning
socket_buffer_size = 4194304  # 4 MiB (increase to 8+ MiB for 10/40 Gbps links)
tcp_nodelay = true  # Disable Nagle algorithm for lower latency
tcp_keepalive = true  # Enable TCP keepalive
tcp_keepalive_idle = 60  # Seconds before first keepalive probe
tcp_keepalive_interval = 10  # Seconds between keepalive probes
tcp_keepalive_count = 3  # Number of failed probes before closing

# ============================================================================
# Multi-Service Mode (commented example)
# ============================================================================
# Uncomment to enable multi-service forwarding:
#
# [client.services.web]
# type = "tcp"
# local_port = 8080
# target_host = "10.0.0.10"
# target_port = 80
# service_id = 1  # Optional: auto-assigned if not specified
# token = "web-service-token"  # Optional: uses default_token if not specified
#
# [client.services.dns]
# type = "udp"
# local_port = 5353
# target_host = "10.0.0.53"
# target_port = 53
# service_id = 2
# token = "dns-service-token"
# udp_timeout_seconds = 30  # UDP session timeout (optional)
