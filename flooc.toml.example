# Floo Tunnel Client Configuration
# Copy this file to flooc.toml and customise for your environment.
# Replace the placeholder secrets before exposing the tunnel publicly.

# Global client defaults
[client]
local_port = 9001
remote_host = "tunnel.example.com"
remote_port = 8443
num_tunnels = 4
socket_buffer_size = 8_388_608           # 8 MiB buffers keep 40G NICs full
udp_timeout_seconds = 60

# Transport security
cipher = "aegis128l"                     # Options: aegis128l (fastest), aegis256, aes128gcm, aes256gcm, chacha20poly1305, none
                                         # Recommended: aegis128l for best performance (29.4 Gbps on M1)
                                         # MUST MATCH SERVER CIPHER!
psk = "replace-me-with-a-strong-psk"
default_token = "replace-me-with-a-token" # Used when a service omits its own token
heartbeat_timeout_seconds = 40

# Automatic reconnection (backoff retry)
reconnect_enabled = true
reconnect_initial_delay_ms = 1000
reconnect_max_delay_ms = 30000
reconnect_backoff_multiplier = 2

# Proxy settings (optional - connect to tunnel server via proxy)
# proxy_url = "socks5://127.0.0.1:1080"              # SOCKS5 proxy (no auth)
# proxy_url = "socks5://user:pass@proxy.corp.com:1080"  # SOCKS5 with auth
# proxy_url = "http://proxy.example.com:8080"       # HTTP CONNECT proxy
# proxy_url = "http://user:pass@proxy.corp.com:8080"    # HTTP with auth

# TCP tuning (recommended for high-throughput links)
tcp_nodelay = true
tcp_keepalive = true
tcp_keepalive_idle = 60
tcp_keepalive_interval = 10
tcp_keepalive_count = 3

# TCP service example: expose remote web app on localhost:8080
[client.services.web]
type = "tcp"
local_port = 8080
target_host = "10.0.0.10"
target_port = 80
# token = "custom-token-if-required"     # Optional: overrides default_token
# socket_buffer_size = 8_388_608         # Override per-service if required

# UDP service example: forward DNS queries
[client.services.dns]
type = "udp"
local_port = 5353
target_host = "10.0.0.53"
target_port = 53
# udp_timeout_seconds = 30               # Optional: per-service timeout for UDP sessions
